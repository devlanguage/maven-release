#
# @(#)file      README
# @(#)author    Sun Microsystems, Inc.
# @(#)version   1.9
# @(#)lastedit  04/03/05
#
# Copyright 2004 Sun Microsystems, Inc.  All rights reserved. Use is subject to license terms.


                         Cascading Service Example
                         =========================


-----------------------------------------------------------------------
1. Overview
-----------------------------------------------------------------------

This example shows how to use the cascading services provided in
Java DMK to implement a hierarchy of a master agent and a subagent.


-----------------------------------------------------------------------
2. File List
-----------------------------------------------------------------------

This example is based on the following source files:

 * MasterAgent.java:

    - Creates an MBean server.
    - Registers an HTML adaptor with port 8084 and registers a CascadingAgent
      MBean.
    - Connects the CascadingAgent MBean through the RMI protocol to the subagent
      to cascade remote MBeans in the domain "CascadedDomain".
    - Adds itself as a listener to a "cascaded" Timer MBean notifications.
    - Receives the "cascaded" Timer MBean notifications.
    - Removes the listener from the "cascaded" Timer MBean.

 * SubAgent.java:

    - Creates an MBean server.
    - Registers an HTML adaptor with port 8082 and an RMI adaptor with port
      1099.
    - Registers an Standard MBean under the default domain.
    - Registers a Timer MBean under the "CascadedDomain" domain.

 * SimpleStandard.java:

    - A simple standard MBean.

 * SimpleStandardMBean.java:

    - The management interface of the SimpleStandard MBean.


-----------------------------------------------------------------------
3. Building and Running the Example
-----------------------------------------------------------------------

To build and run this example, make sure that your PATH environment variable
is correctly set to use the Java 2 SDK, Standard Edition 1.4 or later.

On J2SE 1.4, your CLASSPATH must contain the jar files for the JMX runtime
(jmx.jar) and the Java DMK runtime (jdmkrt.jar), as well as the current
directory (.).

On J2SE 1.5, your CLASSPATH must contain the jar files for the Java DMK
runtime (jdmkrt.jar), as well as the current directory (.).

These instructions assume the classpath is set in an environment variable,
though it may also be given on the command line with the -classpath option.

Copy the example source files to your working directory and type the following
commands:

    cd <WORKING_DIR>

    javac *.java

To run the example using the classes you have just built, type the
following commands in two terminal windows on the same machine:

    java SubAgent

    java MasterAgent

To manage the SubAgent through a Web browser, load the following
URL: http://localhost:8082/

You may also access this agent from any remote machine on the same
network by connecting to this URL: http://<subagentHostName>:8082/
(where <agentHostName> is the name or IP address of the machine
where you launched the SubAgent).

To manage the MasterAgent through a Web browser, load the following
URL: http://localhost:8084/

You may also access this agent from any remote machine on the same
network by connecting to this URL: http://<masteragentHostName>:8084/
(where <masteragentHostName> is the name or IP address of the machine
where you launched the MasterAgent).

To run MasterAgent and SubAgent on separate machines, you must change the
connector addresses in the createCascadingAgent() method of MasterAgent.
