# @(#)file      README
# @(#)author    Sun Microsystems, Inc.
# @(#)version   1.4
# @(#)lastedit  04/04/16
#
# Copyright 2004 Sun Microsystems, Inc. All rights reserved.
# SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.


                         Discovery Service Example
                         =========================


-----------------------------------------------------------------------
1. Overview
-----------------------------------------------------------------------

This example shows how to use the Discovery service to discover a connector
server. This connector server can be a legacy Java DMK connector
(HttpConnectorServer, HttpsConnectorServer or RmiConnectorServer) which is
registered in an MBean server as its original MBean interface
(HttpConnectorServerMBean, HttpsConnectorServerMBean or RmiConnectorServerMBean),
or a JSR 160 (JMX Remote API) connector server, or a legacy Java DMK connector
server wrapped as a JMXConnector and registered as a JMXConnectorMBean.


-----------------------------------------------------------------------
2. File List
-----------------------------------------------------------------------

This example is based on the following source files:

 * Responder.java: creates all known connector servers, sends out a
   DiscoveryNotification, and replies to a DiscoveryClient request.

 * Client.java: allows a user to send a discovery request to discover
   connector servers.

 * Monitor.java: waits to receive a DiscoveryNotification.


-----------------------------------------------------------------------
3. Building and Running the Example
-----------------------------------------------------------------------

To build and run this example, make sure that your PATH environment variable
is correctly set to use the Java 2 SDK, Standard Edition (J2SE) 1.4 or later.

On J2SE 1.4, your CLASSPATH must contain the JAR files for the JMX runtime
(jmx.jar), JMX Remote API runtime (jmxremote.jar and jmxremote_optional.jar)
and Java DMK runtime (jdmkrt.jar), as well as the current directory (.).

On J2SE 1.5, your CLASSPATH must contain the JAR files for the optional part of
the JMX Remote API runtime (jmxremote_optional.jar) and the Java DMK runtime
(jdmkrt.jar), as well as the current directory (.).

These instructions assume the classpath is set in an environment variable,
though it may also be given on the command line with the -classpath option.

Copy the example source files to your working directory and type the
following commands:

    cd <WORKING_DIR>

    javac *.java

To run the example using the classes you have just built, type the
following commands in three terminal windows. The three windows can be on
different machines connected by a local network:

    java Client

    java Monitor

    java Responder

-----------------------------------------------------------------------
4. Note
-----------------------------------------------------------------------
When a user presses Return to ask the Responder to create new connector
servers, the Responder will stop then restart its DiscoveryResponder to make
it send out a notification. The Monitor will receive identical notifications
twice because the start and stop operations will each trigger a notification.
