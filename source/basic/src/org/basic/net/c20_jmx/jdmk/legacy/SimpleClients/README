#
# @(#)file      README
# @(#)author    Sun Microsystems, Inc.
# @(#)version   1.17
# @(#)lastedit  04/03/05
#
# Copyright 2004 Sun Microsystems, Inc.  All rights reserved. Use is subject to license terms.


                         Simple Clients Example
                         ======================


-----------------------------------------------------------------------
1. Overview
-----------------------------------------------------------------------

This example shows how to implement simple client applications that
create and manipulate MBeans in a Java DMK agent.


-----------------------------------------------------------------------
2. File List
-----------------------------------------------------------------------

This example is based on the following source files:

* BaseAgent.java

    - The Java DMK base agent from the BaseAgent example.

* ClientGenericProxy.java

    - Creates an RMI connector client and connects it to the
      RMI connector server of the base agent,
    - Asks the MBean server of the base agent to create a standard
      MBean of class SimpleStandard,
    - Asks the RMI connector client to create a generic proxy that
      represents the SimpleStandard MBean,
    - Manages the SimpleStandard MBean through its generic proxy,
    - Deletes the SimpleStandard MBean and its generic proxy,
    - Repeats the 4 previous steps for a dynamic MBean of class
      SimpleDynamic, as a generic proxy instance can be used as
      well to handle a dynamic MBean,
    - Disconnects the RMI connector client from the RMI connector
      server of the base agent.

* ClientMBeanProxy.java

    - Creates an RMI connector client and connects it to the 
      RMI connector server of the base agent,
    - Asks the MBean server of the base agent to create a standard 
      MBean of class SimpleStandard,
    - Asks the RMI connector client to create an MBean proxy (instance
      of SimpleStandardProxy) that represents the SimpleStandard MBean,
    - Manages the SimpleStandard MBean through its MBean proxy,
    - Deletes the SimpleStandard MBean and its MBean proxy,
    - Disconnects the RMI connector client from the RMI connector
      server of the base agent.

    Note: The SimpleStandardProxy.java and SimpleStandardProxyMBean.java
          files need to be generated by proxygen before running this
          example (see section 3 below).
          Only standard MBeans can be handled through their specific
          proxy MBean on the client side.

* ClientWithoutProxy.java

    - Creates an RMI connector client and connects it to the
      RMI connector server of the base agent,
    - Asks the MBean server of the base agent to create a standard 
      MBean of class SimpleStandard,
    - Manages the SimpleStandard MBean directly through the
      RMI connector client (interface specified by the
      RemoteMBeanServer interface),
    - Deletes the SimpleStandard MBean,
    - Repeats the 3 previous steps for a dynamic MBean of class
      SimpleDynamic, as all types of MBeans can be handled directly 
      through the RemoteMBeanServer interface,
    - Disconnects the RMI connector client from the RMI connector
      server of the base agent.

* SimpleDynamic.java

    - The simple dynamic MBean from the dynamic MBean example.

* SimpleStandard.java

    - The simple standard MBean from the standard MBean example.

* SimpleStandardMBean.java

    - The management interface of the SimpleStandard MBean.

* SimpleStandardProxy.java

    - The proxy class to instantiate on the client side in order to
      manipulate a SimpleStandard MBean through a proxy object.
    - This file is generated by the proxygen tool from the class files
      of the SimpleStandard MBean: you need to have it generated before
      running the ClientMBeanProxy example which is the only one to
      use it.

* SimpleStandardProxyMBean.java

    - The management interface of the proxy of the SimpleStandard MBean.
    - It is also generated by the proxygen tool.


-----------------------------------------------------------------------
3. Building and Running the Example
-----------------------------------------------------------------------

To build and run this example, make sure that your PATH environment variable
is correctly set to use the Java 2 SDK, Standard Edition 1.4 or later.

In addition, your PATH must contain the path to the proxygen script which is
located in the bin directory.

On J2SE 1.4, your CLASSPATH must contain the jar files for the JMX runtime
(jmx.jar) and the Java DMK runtime (jdmkrt.jar), as well as the current
directory (.).

On J2SE 1.5, your CLASSPATH must contain the jar files for the Java DMK
runtime (jdmkrt.jar), as well as the current directory (.).

These instructions assume the classpath is set in an environment variable,
though it may also be given on the command line with the -classpath option.

Copy the example source files to your working directory and type the following
commands:

* To build and run the ClientGenericProxy example:

    cd <WORKING_DIR>

    javac ClientGenericProxy.java \
          BaseAgent.java \
          SimpleDynamic.java \
          SimpleStandard.java \
          SimpleStandardMBean.java

    java BaseAgent

  In another shell window type:

    cd <WORKING_DIR>

    java ClientGenericProxy

* To build and run the ClientMBeanProxy example:

    cd <WORKING_DIR>

    javac SimpleStandard.java SimpleStandardMBean.java

    proxygen SimpleStandard

    javac ClientMBeanProxy.java \
          BaseAgent.java \
          SimpleStandardProxy.java \
          SimpleStandardProxyMBean.java

    java BaseAgent

  In another shell window type:

    cd <WORKING_DIR>

    java ClientMBeanProxy

* To build and run the ClientWithoutProxy example:

    cd <WORKING_DIR>

    javac ClientWithoutProxy.java \
          BaseAgent.java \
          SimpleDynamic.java \
          SimpleStandard.java \
          SimpleStandardMBean.java

    java BaseAgent

  In another shell window type:

    cd <WORKING_DIR>

    java ClientWithoutProxy
